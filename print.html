<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js coal">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VexCTF Specification</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The (semi-)formal specifiation for VexCTF, a GraphQL-based API for CTF hosting.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="about.html">About</a></li><li class="chapter-item expanded affix "><a href="contributing.html">Contributing</a></li><li class="chapter-item expanded affix "><a href="security.html">Security</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="overview/index.html"><strong aria-hidden="true">2.</strong> Overview</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="overview/graphql.html"><strong aria-hidden="true">2.1.</strong> GraphQL</a></li><li class="chapter-item expanded "><a href="overview/auth.html"><strong aria-hidden="true">2.2.</strong> Authentication</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">VexCTF Specification</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/Vexillologists/VexCTF-spec.git" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#vexctf-spec" id="vexctf-spec">VexCTF-spec</a></h1>
<p>A WIP CTF platform, (semi-)formally specified.</p>
<h2><a class="header" href="#licensing" id="licensing">Licensing</a></h2>
<p>You are free to use this under the terms of the <a href="https://choosealicense.com/licenses/mit/">MIT License</a>, which you can see <a href="https://github.com/Vexillologists/VexCTF-spec/blob/master/LICENSE">here</a>.</p>
<h2><a class="header" href="#how-to-contribute-to-vexctf" id="how-to-contribute-to-vexctf">How to contribute to VexCTF</a></h2>
<h4><a class="header" href="#did-you-find-a-bug" id="did-you-find-a-bug"><strong>Did you find a bug?</strong></a></h4>
<ul>
<li>
<p><strong>Do not open up a GitHub issue if the bug is a security vulnerability in VexCTF</strong>. Instead send us the details as is described in our <a href="https://github.com/Vexillologists/VexCTF-spec/blob/master/SECURITY.md">security policy</a>.</p>
</li>
<li>
<p><strong>Ensure the bug was not already reported</strong> by searching on GitHub under <a href="https://github.com/Vexillologists/VexCTF-spec/issues">Issues</a>.</p>
</li>
<li>
<p>If you’re unable to find an open issue addressing the problem, <a href="https://github.com/Vexillologists/VexCTF-spec/issues/new">open a new one</a>. Be sure to fill out the issue template with a <strong>title and clear description</strong>, and as much relevant information as possible (e.g. deployment setup, browser version, etc).</p>
</li>
</ul>
<h4><a class="header" href="#did-you-write-a-patch-that-fixes-a-bug-or-implements-a-new-feature" id="did-you-write-a-patch-that-fixes-a-bug-or-implements-a-new-feature"><strong>Did you write a patch that fixes a bug or implements a new feature?</strong></a></h4>
<ul>
<li>
<p>Open a new pull request with the patch.</p>
</li>
<li>
<p>Ensure the PR description clearly describes the problem and solution. Include the relevant issue number if applicable.</p>
</li>
<li>
<p>Ensure all status checks pass. PR’s with test failures will not be merged. PR’s with insufficient coverage may be merged depending on the situation.</p>
</li>
</ul>
<h4><a class="header" href="#did-you-fix-whitespace-format-code-or-make-a-purely-cosmetic-patch" id="did-you-fix-whitespace-format-code-or-make-a-purely-cosmetic-patch"><strong>Did you fix whitespace, format code, or make a purely cosmetic patch?</strong></a></h4>
<p>Changes that are cosmetic in nature and do not add anything substantial to the stability, functionality, or testability of VexCTF will sometimes not be accepted.</p>
<h1><a class="header" href="#security-policy" id="security-policy">Security Policy</a></h1>
<h2><a class="header" href="#supported-versions" id="supported-versions">Supported Versions</a></h2>
<p>The following API versions are supported:</p>
<table><thead><tr><th>Version</th><th>Supported</th></tr></thead><tbody>
<tr><td>&gt;=1.0.0</td><td>✅</td></tr>
</tbody></table>
<h2><a class="header" href="#reporting-a-vulnerability" id="reporting-a-vulnerability">Reporting a Vulnerability</a></h2>
<p>If you’ve found a vulnerability, please email <a href="mailto:vexctf@teamisotope.com"><code>vexctf@teamisotope.com</code></a>. We will discuss details and rewards
once we have triaged and considered/fixed the issue.</p>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>This is the (semi-)formal specification for VexCTF, a CTF platform.</p>
<h2><a class="header" href="#copyright" id="copyright">Copyright</a></h2>
<p>VexCTF’s specification and associated code is licensed under the MIT license.</p>
<p>Copyright (c) 2020 Vexillologists</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<h2><a class="header" href="#keywords" id="keywords">Keywords</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative portions of this document are to be interpreted as described in IETF RFC 2119. These key words may appear in lowercase and still retain their meaning unless explicitly declared as non‐normative.</p>
<h1><a class="header" href="#overview" id="overview">Overview</a></h1>
<p>This chapter will go over the general software architecture model of VexCTF, as well as various design practices.</p>
<h1><a class="header" href="#graphql" id="graphql">GraphQL</a></h1>
<p>VexCTF uses GraphQL for almost all API features. This is excluding some things like file upload which uses REST.</p>
<h2><a class="header" href="#endpoint-requirements" id="endpoint-requirements">Endpoint Requirements</a></h2>
<p>The following GraphQL endpoint(s) must be implemented: </p>
<ul>
<li><code>/graphql</code>: A GraphQL endpoint using HTTP <code>POST</code> requests.</li>
</ul>
<p>The request and response must be in JSON format and have a <code>Content-Type</code> header of <code>application/json</code>.</p>
<p>Any further GraphQL endpoint(s) may be implemented as long as they do not conflict with existing endpoints.</p>
<h2><a class="header" href="#graphql-feature-requirements" id="graphql-feature-requirements">GraphQL Feature Requirements</a></h2>
<p>It is required that introspection must be enabled within the GraphQL implementation of choice.</p>
<p>Any further GraphQL features are entirely optional.</p>
<h2><a class="header" href="#recommendations" id="recommendations">Recommendations</a></h2>
<p>It is recommended that a graphical interface for GraphQL (e.g. GraphiQL, GraphQL Playground, etc.) is implemented, as they highly aid in debugging. However, this is optional in production environments. In the case that one is implemented, it can be on any endpoint, as long as it does not conflict with existing endpoints.</p>
<h1><a class="header" href="#authentication" id="authentication">Authentication</a></h1>
<p>Authentication in VexCTF uses JSON Web Tokens (JWTs) as described in <a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>. </p>
<p>Tokens should be passed by the <code>Authorization</code> header with type <code>Bearer</code> (in uppercase).
For example:</p>
<pre><code class="language-http">POST /graphql
Authorization: Bearer eyJhbG...shortened for example...lRTcIeq6vlpAv0
Content-Type: application/json
</code></pre>
<p>All GraphQL queries and mutations, as well as any REST APIs are assumed to require authentication, unless explicitly specified.</p>
<h2><a class="header" href="#token-requirements" id="token-requirements">Token Requirements</a></h2>
<p>The JWT session token must contain the following fields:</p>
<ul>
<li><code>exp</code>: The expiry timestamp as a UNIX timestamp in seconds.</li>
<li><code>jti</code>: The internal session ID, in any form. This is usually used to allow server-side expiry/validity information and revokation.</li>
<li><code>uid</code>: The user’s Node ID.</li>
</ul>
<p>The signature may be generated with any algorithm in the JWT specification, however it is recommended that any <code>HMACSHAnnn</code>-based (<code>HSnnn</code>) algorithm is used as they are typically more supported than others.</p>
<p>Any other application-specific fields are allowed but a basic implementation will usually only need the required fields.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>
        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        
        <script src="ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="src/fontawesome5kit.js"></script>
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>
        
        

    </body>
</html>
